function LGY_tab(a){this.oTab_btn=this.getDom(a.tabBtn),this.oTab_clist=this.getDom(a.tabCon),this.sCur=a.cur,this.type=a.type||"click",this.nLen=this.oTab_btn.length,this.sNum=a.num&&a.num<this.nLen?a.num:0,this.init()}function get_city(obj,proid){var isset=$(obj).siblings(".type-li-m").html();if($(obj).siblings(".type-li-m").show(),""!=isset)return!1;var key="pro_v1_"+proid;islocal=getDataFromLocal(key),null==islocal||""==islocal?($.ajax({url:"ajax.php",type:"post",data:{act:"get_city_by_proid",id:proid},dataType:"text",async:!1,beforeSend:function(){$(obj).siblings(".type-li-m").html("\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019..")},success:function(b){var jsonobj=eval("("+b+")");"0"==jsonobj.status?($(obj).siblings(".type-li-m").html(jsonobj.data),setDataToLocal(key,JSON.stringify(jsonobj.data))):"2"==jsonobj.status?location.href="l_"+jsonobj.data+"_2_1":$(obj).siblings(".type-li-m").html("\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\u3002")},error:function(){alert("\u51fa\u9519\u4e86")}}),setDataToLocal(key,JSON.stringify(jsonobj.info))):(data=JSON.parse(islocal),$(obj).siblings(".type-li-m").html(data))}function showImg(a){var b;document.getElementById("mask").style.display="block",document.getElementById("nav").style.display="table",document.body.style.overflow="hidden";var c=document.getElementById("mask");c.innerHTML="<div class='maskLayer4' id='maskLayer4'><div id='scroller' ><ul id='list'></ul></div><div class='ps-caption'><div class='ps-caption-content'>\u767e\u4e07\u8475\u56ed\u56fe\u7247</div></div><ul id='indicator'></ul>";var d=document.getElementById("nav");d.innerHTML="<div class='ps-toolbar-close' onclick='closeImg()'><div class='ps-toolbar-content'></div></div><div class='ps-toolbar-previous' id='prev' onclick='myScroll.scrollToPage(\"prev\", 0);return false'><div class='ps-toolbar-content'></div></div><div class='ps-toolbar-next' id='next' onclick='myScroll.scrollToPage(\"next\", 0);return false'><div class='ps-toolbar-content'></div></div></div>";var e=document.getElementById("maskLayer4"),f=e.offsetHeight,g=e.offsetWidth,h=document.getElementById("list"),i=panel.getElementsByTagName("img"),j=i.length,k=document.getElementById("indicator");document.getElementById("scroller").style.width=g*j+"px",document.getElementById("list").style.width=g*j+"px";for(var l=0;l<i.length;l++){var m=document.createElement("li"),n=document.createElement("img");n.src=i[l].src,n.style.width="100%",m.style.width=g+"px",h.appendChild(m),m.appendChild(n),n.onload=function(){var a=n.height;this.parentNode.style.marginTop=f/2-a/2+"px",this.parentNode.style.width=g+"px"},mark=document.createElement("li"),a.getAttribute("data")==l+1&&(b=l+1),mark.innerHTML=l+1,k.appendChild(mark)}myScroll=new iScroll("maskLayer4",{snap:!0,momentum:!1,hScrollbar:!1,onScrollEnd:function(){null!=document.querySelector("#indicator > li.active")&&(document.querySelector("#indicator > li.active").className=""),document.querySelector("#indicator > li:nth-child("+(this.currPageX+1)+")").className="active"}}),myScroll.scrollToElement("li:nth-child("+b+")",0),myScroll.currPageX=b-1,document.querySelector("#indicator > li.active").className="",document.querySelector("#indicator > li:nth-child("+b+")").className="active"}function closeImg(){document.getElementById("mask").innerHTML="",document.getElementById("mask").style.display="none",document.getElementById("nav").innerHTML="",document.getElementById("nav").style.display="none",document.body.style.overflow="scroll"}function top_search(a){var b=$("#keyword").val();return""==b?($("#keyword").focus(),!1):(location.href="l_"+b+"_"+a+"_1",void 0)}function initMap(a,b,c){createMap(a,b,c),setMapEvent(),addMapControl()}function createMap(a,b,c){var d=new BMap.Map(a),e=new BMap.Point(b,c);d.centerAndZoom(e,15),window.map=d;var f=new BMap.Marker(e);d.addOverlay(f);var g=$("#name").val(),h=$("#address").val(),i=new BMap.InfoWindow("<p style='font-size:14px;'>"+g+"</p><p style='font-size:14px;'>\u5730\u5740\uff1a"+h+"</p>");f.addEventListener("click",function(){this.openInfoWindow(i)}),f.openInfoWindow(i)}function setMapEvent(){map.enableDragging(),map.enableScrollWheelZoom(),map.enableDoubleClickZoom(),map.enableKeyboard()}function addMapControl(){var a=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});map.addControl(a);var b=new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});map.addControl(b);var c=new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});map.addControl(c)}function setDataToLocal(a,b){if(window.localStorage&&""!=b&&null!=b){var c=window.localStorage;c.setItem(a,b)}}function getDataFromLocal(a){var b="";if(window.localStorage){var c=window.localStorage;b=c.getItem(a)}return b}function get_user_position(a){var b=getCookie("po_lng"),c=getCookie("po_lat");if(b&&c)return $(a).attr("data-status","true"),$(a).attr("data-lng",b),$(a).attr("data-lat",c),!1;$(a).html("\u6b63\u5728\u83b7\u53d6\u60a8\u7684\u4f4d\u7f6e..."),$(a).attr("data-status","loading");var d=new BMap.Geolocation;d.getCurrentPosition(function(b){if(this.getStatus()==BMAP_STATUS_SUCCESS){var c=new BMap.Point(b.point.lng,b.point.lat),d=new BMap.Geocoder;d.getLocation(c,function(c){var d=c.addressComponents;d.city+d.district+d.street,$(a).html("\u9644\u8fd1\u666f\u70b9"),$(a).attr("data-status","true"),$(a).attr("data-lng",b.point.lng),$(a).attr("data-lat",b.point.lat),setCookie("po_lng",b.point.lng,"d1"),setCookie("po_lat",b.point.lat,"d1")})}else $(a).html("\u65e0\u6cd5\u83b7\u53d6\u60a8\u5f53\u524d\u4f4d\u7f6e\u4fe1\u606f"),$(a).attr("data-status","none")},{enableHighAccuracy:!0})}function get_nearby(a){var b=$(a).attr("data-status");if("false"==b)return alert("\u6b63\u5728\u51c6\u5907\u83b7\u53d6\u60a8\u7684\u4f4d\u7f6e\uff0c\u8bf7\u7a0d\u5019.."),!1;if("loading"==b)return alert("\u6b63\u5728\u83b7\u53d6\u60a8\u7684\u4f4d\u7f6e\u4e2d.."),!1;if("none"==b)return alert("\u65e0\u6cd5\u83b7\u53d6\u60a8\u7684\u4f4d\u7f6e"),!1;if("true"==b){var c=$(a).attr("data-lat"),d=$(a).attr("data-lng");window.location="nearby_"+c+"_"+d}}function search_key_down(){document.onkeydown=function(a){var a=window.event;(13==a.keyCode||108==a.keyCode&&doucment.getElementById("keyword"))&&$(".a-btn").click()}}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}function setCookie(a,b,c){c=c?c:"";var d=getSec(c),e=new Date;e.setTime(e.getTime()+1*d),document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()}function getSec(a){a=a?a:"d30";var b=1*a.substring(1,a.length),c=a.substring(0,1);return"s"==c?1e3*b:"h"==c?1e3*60*60*b:"d"==c?1e3*60*60*24*b:void 0}if($(function(){document.getElementById("target_list")&&$("#target_list li").live("click",function(){window.location.href=$(this).find(".l-name").attr("href")}),search_key_down()}),document.getElementsByClassName("l-nav").length>0&&(document.getElementsByClassName("l-nav")[0].onclick=function(){var a=a||window.event,b=a.srcElement||a.target,c=b.parentNode.childNodes;if(b&&""===b.className){for(var d=c.length-1;d>=0;d--)c[d].className="";b.className="l-cur"}}),LGY_tab.prototype={getId:function(a){return document.getElementById(a)},getByClassName:function(a,b){for(var c=[],d=void 0!=b&&1==b.nodeType?b.getElementsByTagName("*"):document.getElementsByTagName("*"),e=new RegExp("(^|\\s)"+a+"(\\s|$)"),f=0,g=d.length;g>f;f++)e.test(d[f].className)&&c.push(d[f]);return c},getDom:function(a){var b=a.split(" "),c=this.getId(b[0].slice(1)),d=this.getByClassName(b[1].slice(1),c);return d},change:function(){for(var a=new RegExp("(^|\\s)"+this.sCur,"g"),b=0;b<this.nLen;b++)this.oTab_clist[b].style.display="none",this.oTab_btn[b].className=this.oTab_btn[b].className.replace(a,"")},init:function(){for(var a=this,b=0;b<this.nLen;b++)this.oTab_btn[b].index=b,this.oTab_btn[b]["on"+this.type]=function(){a.change(),a.oTab_btn[this.index].className+=" "+a.sCur,a.oTab_clist[this.index].style.display="block"}}},document.getElementsByClassName("img_panel")[0]&&document.getElementsByClassName("img_panel")[0].getElementsByTagName("img").length>0)for(var img=document.getElementsByClassName("img_panel")[0].getElementsByTagName("img"),i=0;i<img.length;i++)img[i].onclick=function(){showImg(this)};